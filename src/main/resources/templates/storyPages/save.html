<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <meta name="_csrf" th:content="${_csrf.token}">
    <title>Title</title>

    <style>
        body{
            background-color: rgb(242, 243, 245) !important;
        }
        .btn-primary {
            background-color:rgba(71,66,69,0.4) !important;
            border-radius: 70% !important;
        }
        .btn-outline-primary {
            color: lightgray !important;
            background-color: transparent !important;
            border: 0 !important;
        }
        .btn-secondary {
            color: black !important;
            background-color: white;
            padding: 0;
            width: 80px !important;
            height: 40px !important;
            border: 1px solid white;
            border-radius: 5% !important;
        }
        p {
            text-align: left;
            font-size: 12px;
        }
        .saveBox {
            width: 500px;
            height: 888px;
            padding-left: 0;
            padding-right: 0;
            margin-top: 30px;
            margin-left: auto;
            margin-right: auto;
            border-radius: 1px;
            background-color: whitesmoke;
            border: 1px solid rgb(214, 214, 214);
            overflow: hidden;
            position: relative;
        }
        .mainMenu {
            width: 100%;
            height: 50px;
            position: absolute;
            z-index: 6500;
        }
        .editMenu {
            width: 200px;
            height: 50px;
            position: absolute;
            top: 5px;
            right: 10px;
            display: none;

        }
        .fontMenu {
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: 21;
            overflow: hidden;
            display: none;
        }
        .closeDiv {
            width: 30px;
            height: 30px;
            position: relative;
            top: 50px;
            left: 95%;
        }
        .filePreview {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            overflow: hidden;
            position: absolute;
            z-index: 11;
        }
        .inputFileBtn {
            width: 250px;
            position: absolute;
            top: 5px;
            left: 10px;
        }
        #upImgFiles {
            width: 100%;
        }

        .saveStory {
            text-align: center;
            padding-top: 10px;
            border-radius: 50%;
            background-color: white;
            width: 40px;
            height: 40px;
            position: absolute;
            top: 660px;
            right: 20px;
            display: none;
        }

        .inputText {
            width: 250px;
            height: 75px;
            color: yellow;
            background-color: transparent;
            border: 0;
            border-spacing: 0;
            text-align: center;
            vertical-align: middle;
            position: absolute;
            z-index: 6500;
            top: 50%;
            display: none;

        }
        .inputTextDiv {
            width: 250px;
            height: 75px;
            display: none;
            position: absolute;
            z-index: 6500;
            top: 50%;
        }
        .rangBar {
            width: 30px;
            height: 400px;
            padding-top: 10%;
            position: absolute;
            top: 40px;
            left: 5px;
        }


        .editFont {
            width: 200px;
            height: 50px;
            position: absolute;
            top: 5px;
            right: 2px;
        }
        .editBox {
            margin-top: 70%;
            height: 50%;
            width: 100%;
            text-align: center;
            margin-left: auto;
            margin-right: auto;
            position: absolute;
            display: none;
        }
        .filters {
            width: 100%;
            padding-top: 65%;
            text-align: center;
            position: absolute;
        }
        .saveBtn {
            position: absolute;
        }

        input[type="range"] {
            -webkit-appearance: slider-vertical;
            width: 30px;
            height: 80%;
        }
        .colorCircles {
            width: 94%;
            height: 4%;
            position: absolute;
            top: 85%;
            left: 3%;
            display: none;
        }
        .circles {
            margin: 0 auto;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid dimgray;
            float: left;
            margin: 3px;
        }
        .fontDiv {
            width: 280px;
            height: 50px;
            position: absolute;
            top: 90%;
            left: 22%;
            display: none;
        }
        .fontKr {
            margin: 0 auto;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid dimgray;
            float: left;
            padding-top: 3px;
            margin: 3px;
            font-size: 22px;
            text-align: center;
            color: white;
            background-color: rgba(0,0,0,0.4);

        }
        .aaa {
            height: 100%;
        }

        @import 'https://fonts.googleapis.com/css?family=Lato';


        .slide
        {
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(30px);
            border-radius: 1em;
            padding: 2rem 4rem 4rem 4rem;
            display: none;
            width: 100%;
            height: 100%;
        }
        #reverse {
            margin-top: 31%;
            padding-bottom: 0;
            height: 85%;
            position: relative;
            z-index: 21;
        }
        .slideUp
        {
            position: absolute;
            bottom: 0;
        }
        .slide btn-close {
            position: fixed;
            left: 90%;
        }
        .btnFncDiv {
            text-align: center;
            padding-top: 20%;
            margin-bottom: 50px;
            width: 100%;

        }
        .btnFnc {
            width: 100%;
            border-radius: 3%;
            margin-right: 20px;
        }
        .closeDiv2 {
            text-align: center;
            width: 370px;
            position: absolute;
            color: white;
            font-size: 20px;
        }
        .addFileLabel {
            border: 1px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            background-color: white;
            padding-top: 0;
            margin-right: 45px;
        }

        .addImg {
            width: 100%;
            height: 100%;
        }
        #imgDrag {
            position: absolute;
            top: 50%;
            left: 25%;
        }
        .addImgDiv {
            width: 100%;
            height: 100%;
            text-align: center;
            position: absolute;
            overflow: hidden;
            display: none;
            z-index: 3000;
        }
        .linkDiv {
            padding-top: 30px;
            text-align: center;
            color: whitesmoke;
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: 7100;
            display: none;
        }
        #siteLink {
            color: whitesmoke;
            width: 100%;
            background-color: transparent;
            border: 0;
            border-bottom: 1px solid lightgrey;
        }
        input::placeholder {
            color: darkgray;
        }
        .returnLeft {
            background-color: transparent;
            border: 0;
            color: whitesmoke;
            font-weight: 700;
            margin-right: 30%;
        }
        .inputLink {
            width: 65%;
            height: 100%;
            color: blue;
            text-align: left;
            background-color: transparent;
            border: 0;
            font-weight: 700;
            font-size: 20px;
            padding: 0;


        }
        .inputLinkDiv {
            width: 120px;
            height: 39px;
            color: blue;
            font-size: 20px;
            font-weight: 700;
            background-color: white;
            border-radius: 10px;
            border: 0;
            padding-left: 10px;
            position: absolute;
            top: 50%;
            left: 37%;
            z-index: 6500;
            display: none;


        }
        input:focus {outline:none;}
        #stickerDiv {
            color: whitesmoke;
            display: none;
            text-align: left;
        }
        #stickerInput {
            color: whitesmoke;
            width: 100%;
            background-color: transparent;
            border: 0;
            border-bottom: 1px solid lightgrey;
        }
        #todayDiv {
            width: 100%;
            color: white;
            background-color: transparent;
            position: absolute;
            z-index: 5000;
            top: 50%;
            left: 40%;
            display: none;

        }
        .inputToday {
            width: 105px;
            height: 40px;
            border: 0;
            color: white;
            font-size: 20px;
            font-weight: 700;
            background-color: transparent;
            position: absolute;
            top: 50%;
            left: 40%;
            z-index: 6500;
            display: none;
        }
        .questionDiv {
            width: 213px;
            height: 108px;
            position: absolute;
            top: 40%;
            left: 0;
            z-index: 20;
            display: none;

        }
        .questionBox {
            width: 210px;
            height: 105px;
            background-color: white;
            border: 1px solid transparent;
            border-radius: 10px;
            padding-top: 9%;
            position: absolute;
            top: 40%;
            left: 30%;
            text-align: center;
            z-index: 20;
            display: none;
        }
        #question2 {
            background-color: transparent;
            border: 0;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 5px;
            font-weight: 700;
            font-size: 20px;
            text-align: center;
            position: relative;
            top: -25px;
        }
        #answer {
            width: 90%;
            height: 40px;
            margin: 5px;
            background-color: lightgrey;
            border: 0;
            border-radius: 7px;
            position: relative;
            top: -32px;
        }
        #circleLogo {
            background-color: skyblue;
            border: 1px solid lightgrey;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            position: absolute;
            top: -25%;
            left: 42%;
        }
        .logoImg {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }
        .tagGroup {
            width: 100%;
            height: 100%;
            border-radius: 3%;
            position: absolute;
            z-index: 31;
            display: none;
        }
        .endClose {
            width: 60px;
            position: absolute;
            left: 90%;
            display: none;
            z-index: 3000;
        }
        .surveyDiv {
            width: 190px;
            height: 180px;
            border: 0px solid transparent;
            border-radius: 10px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }
        .surveyGroup {
            width: 193px;
            height: 182px;
            text-align: center;
            background-color: white;
            border-radius: 10px;
            position: absolute;
            top: 30%;
            left: 15%;
            z-index: 31;
            display: none;
        }
        #question {
            color: white;
            margin: 0 auto 8px auto;
            padding: 0;
            background-color: black;
            border: 0;
            width: 100%;
            font-weight: 700;
            font-size: 20px;
            text-align: center;
        }
        #question.survey{
            border-radius: 0;
        }
        .survey {
            width: 90%;
            height: 35px;
            margin: 5px;
            background-color: lightgrey;
            border: 0;
            border-radius: 10px;
        }
        .quizGroup {
            width: 188px;
            height: 150px;
            position: absolute;
            top: 30%;
            left: 29%;
            background-color: white;
            border: 0;
            border-radius: 10px;
            display: none;

        }
        .shapeBtn {
            width: 80%;
            height: 40px;
            border: 1px solid darkgrey;
            border-radius: 15px;
            background-color: transparent;
            margin: 10px auto;
        }
        .quizDiv {
            height: 100%;
            text-align: center;
        }
        .shapeQuestion {
            width: 100%;
            height: 40px;
            background-color: black;
        }
        .quiz {
            text-align: center;
            color: white;
            width: 100%;
            height: 40px;
            background-color: black;
            border: 0;
            padding: 0;
        }
        .quizIco {
            color: #343a40;
            font-weight: 700;
            background-color: white;
            border: 1px solid darkgrey;
            border-radius: 50%;
            text-align: center;
            width: 25px;
            height: 25px;
            float: left;
            margin-top: 7px;
            margin-left: 4px;
            line-height: 23px;
            padding-left: 5px;
        }
        .option {
            width: 80%;
            height: 100%;
            border: 0;
            border-radius: 15px;
            padding: 0;
            background-color: transparent;
        }
        .optionDiv {
            width: 90%;
            height: 128px;
            margin-left: auto;
            margin-right: auto;
        }
        input {
            outline: none;
        }
        #shapeBtn3 {
            border: 0;
            display: none;
        }
        #shapeBtn4 {
            border: 0;
            display: none;
        }
        .hashtagDiv {
            width: 130px;
            height: 40px;
            font-size: 20px;
            color: hotpink;
            background: white;
            border-radius: 10px;
            text-align: center;
            float: left;
            margin-right: auto;
            margin-left: auto;
            position: absolute;
            top: 50%;
            left: 37%;
            z-index: 31;
            display: none;
        }
        .inputHashTag {
            width: 95px;
            height: 25px;
            background-color: transparent;
            border: 0;
            font-size: 20px;
            color: hotpink;
            float: left;
            padding: 0;
            margin-top: 5%;
            margin-left: 3%;

        }
        .sharp {
            width: 10px;
            height: 15px;
            float: left;
            background-color: transparent;
            font-size: 20px;
            color: hotpink;
            text-align: right;
            margin: 5% 0% auto 10%;

        }
        input::placeholder{
            color: hotpink;
        }
        input:focus {
            outline: none;
        }
        .hashtag {
            background-color: white;
            width: 100%;
            height: 40px;
            text-align: center;
            align-items: center;
            margin-right: auto;
            margin-left: auto;
            border-radius: 10px;
        }
        .referenceDiv {
            width: 156px;
            height: 40px;
            font-size: 20px;
            color: hotpink;
            text-align: center;
            float: left;
            background: white;
            border-radius: 10px;
            position: absolute;
            top: 50%;
            left: 34%;
            display: none;
        }
        .inputReference {
            width: 100px;
            height: 25px;
            background-color: transparent;
            border: 0;
            font-size: 20px;
            color: hotpink;
            float: left;
            padding: 0;
            margin-top: 5%;
        }
        .at {
            width: 20px;
            height: 20px;
            margin-left: 13%;
            margin-top: 4%;
            float: left;
            background-color: transparent;
            font-size: 20px;
            color: hotpink;
            text-align: right;
        }
        input::placeholder{
            color: hotpink;
        }
        input:focus {
            outline: none;
        }
        .reference {
            background-color: white;
            width: 155px;
            height: 40px;
            text-align: center;
            align-items: center;
            margin-right: auto;
            margin-left: auto;
            border-radius: 10px;
            padding-left: 20px;
            position: absolute;
        }
        .locationDiv {
            color: lightgray;
            width: 80%;
            height: 30px;
            font-size: 20px;
            text-align: center;
            float: left;
            margin-right: auto;
            margin-left: auto;
            position: absolute;
            border-radius: 10px;
            background-color: #343a40;
            top: 10%;
            left: 10%;
        }
        .inputLocation {
            color: lightgray;
            width: 75%;
            height: 30px;
            background-color: transparent;
            border: 0;
            font-size: 16px;
            float: left;
            padding: 0;
        }
        .search {
            color: lightgray;
            width: 10%;
            height: 100%;
            float: left;
            background-color: transparent;
            font-size: 20px;
            line-height: 30px;
        }
        .endDiv {
            border: 0;
            background-color: transparent;
            color: lightgray;
        }
        .closeLocation {
            border: 0;
            background-color: transparent;
            color: lightgray;
            font-size: 20px;
        }
        .locationGroup {
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            display: none;
        }
        .locationTag {
            width: 125px;
            height: 30px;
            border-radius: 10px;
            border: 0;
            background-color: white;
            text-align: center;
            line-height: 30px;
            position: absolute;
            top: 50%;
            left: 37%;
            z-index: 31;
            display: none;
        }
        .ui-wrapper {
            position: absolute;
        }
        .removeTag {
            font-size: 30px;
            text-align: center;
            width: 30px;
            height: 30px;
            position: absolute;
            margin-left: 240px;
            top: 80%;
            z-index: 9000;
            display: none;
        }
        #removeTag.hover{
            font-size: 40px;
            font-weight: 700;
            color: red;
        }
        #imgBtnZone {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 50%;
            position: absolute;
            left: 25%;
            z-index: 9000;
            text-align: center;
        }
        label.btnPointer {
            width: 10%;
            height: 10%;
            z-index: 9000;
        }
        #uploadBtn {
            color: #0d6efd;
            font-size: 70px;
            position: absolute;
            top: 40%;
            margin-left: 50%;
            margin-left: 50%;
        }

    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">
    <link rel="stylesheet"href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dongle:wght@300&family=Hi+Melody&family=Nanum+Pen+Script&family=Noto+Sans+KR:wght@100&family=Noto+Serif+KR:wght@200&family=Single+Day&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
</head>
<body>
    <div class="container" id="container">
        <div class="closeDiv">
            <button type="button" class="btn-close" id="closeStories" onclick="location.href='javascript:history.back()'" aria-label="Close"></button>
        </div>
        <div class="saveBox" id="saveBox">
<!--            <div class="draggable inputTextDiv" id="inputTextDiv">-->
            <input class="draggable inputText" type="text" id="mainInputText" name="mainInputText">
<!--            </div>-->
            <input type="button" class="draggable inputToday" id="inputToday">
<!--            <div class="todayDiv" id="todayDiv">-->
<!--            </div>-->
            <div class="filePreview" id="filePreview"></div>
            <button type="button" class="draggable locationTag" id="locationTag"></button>
            <div class="addImgDiv" id="addImgDiv">
                <div id="imgDrag">
                    <img class="addImg" id="addImg">
                </div>
            </div>
<!--            <div class="questionDiv" id="questionDiv">-->
            <div class="draggable questionBox" id="questionBox">
                <div id="circleLogo"><img th:src="@{|/upload/${memberDTO.memberProfileName}/|}" class="logoImg" alt="등록사진이 없어서"></div>
                <input type="text" id="question2" placeholder="무엇이든 물어보세요!">
                <input type="text" id="answer" placeholder="무엇이든 물어보세요!">
            </div>
<!--            </div>-->
<!--            <div class="draggable inputLinkDiv" id="inputLinkDiv">-->
<!--                <i class="draggable bi bi-link-45deg" style="font-size: 25px; color: blue"></i>-->
<!--                <input type=" draggable button" class="inputLink" id="inputLink">-->
<!--            </div>-->
            <div class="draggable inputLinkDiv" id="inputLinkDiv"><i class="bi bi-link-45deg" style="font-size: 25px; color: blue"></i></div>
            <div class="draggable surveyGroup" id="surveyGroup">
                <input type="text"  class="survey" id="question" placeholder="질문을 입력하세요">
                <input type="text"  class="survey" id="answer1" placeholder="예">
                <input type="text"  class="survey" id="answer2" placeholder="아니요">
                <input type="text"  class="survey" id="answer3" placeholder="다른 옵션 추가..." onkeyup="newInput()">
                <input type="text"  class="survey" id="answer4" placeholder="다른 옵션 추가..." onblur="answer4Fnc()" style="display: none; margin-right: auto; margin-left: auto">
            </div>
            <div class="draggable quizGroup" id="quizGroup">
                <input type="text"  class="quiz" id="quiz" placeholder="내가 좋아하는 것은...">
                <div class="shapeBtn" id="shapeBtn1">
                    <button type="button" class="quizIco" id="quizIcoA" onmousedown="clickQuizIcoA()">A</button>
                    <input type="text" class="option" id="option1" onkeyup="addCheck()" name="quizOption" placeholder="옵션1">
                </div>
                <div class="shapeBtn" id="shapeBtn2">
                    <button type="button" class="quizIco" id="quizIcoB" onmousedown="clickQuizIcoB()">B</button>
                    <input type="text" class="option" id="option2" onkeyup="addCheck()" name="quizOption" placeholder="옵션2">
                </div>
                <div class="shapeBtn" id="shapeBtn3">
                    <button type="button" class="quizIco" id="quizIcoC" onmousedown="clickQuizIcoC()" >C</button>
                    <input type="text" class="option" id="option3" onkeyup="addCheck2()" onblur="delCheck()" name="quizOption" placeholder="추가">
                </div>
                <div class="shapeBtn" id="shapeBtn4">
                    <button type="button" class="quizIco" id="quizIcoD" onmousedown="clickQuizIcoD()">D</button>
                    <input type="text" class="option" id="option4" onkeyup="addCheck3()" name="quizOption" placeholder="추가">
                </div>
                <!--                    <div class="quizDiv" id="quizDiv">-->
                <!--                        <div class="shapeQuestion">-->
                <!--                        </div>-->
                <!--                        <div class="optionDiv" id="optionDiv">-->
                <!--                        </div>-->
                <!--                    </div>-->
            </div>
            <div class="draggable referenceDiv" id="referenceDiv">
                <div class="at" id="at">@</div>
                <input type="text"  class="inputReference" id="inputReference" placeholder="언급">
            </div>
            <div class="draggable hashtagDiv" id="hashtagDiv">
                <div class="sharp" id="sharp">#</div>
                <input type="text"  class="inputHashTag" id="inputHashTag" placeholder="해시태그">
            </div>
            <div class="tagGroup" id="tagGroup">

                <div class="endClose" id="endClose">
                    <input type="button" class="btn btn-outline-primary" onclick="endQuestion()" value="완료">
                </div>
                <div class="locationGroup" id="locationGroup">
                    <div class="endDiv" id="endDiv">
                        <button class="closeLocation" onclick="endLocation()"><i class="bi bi-x-lg"></i></button>
                    </div>
                    <div class="locationDiv" id="locationDiv">
                        <div class="location">
                            <div class="search" id="search"><i class="bi bi-search"></i></div>
                            <input type="text"  class="inputLocation" id="inputLocation" onkeyup="searchLocation()" placeholder="위치 검색..." autofocus>
                        </div>
                    </div>
                    <div class="locationList" id="locationList"></div>
                </div>
            </div>

            <div id="imgBtnZone" style="padding: 0;margin: 0;">
                <a href="#"><label for="upImgFiles" class="btnPointer modal1">
                    <!--                            <i id="imgBtn" onclick="imgBtnEffect()" name="imgBtn" class=" modal1 fa-regular fa-file-image"-->
                    <!--                               style="color:#0d6efd;font-size: 70px;position:absolute ;top:40%;left:40%">-->
                    <!--                            </i>-->
                    <i class="bi bi-file-earmark-image" id="uploadBtn" style="color:#0d6efd;font-size: 70px;position:absolute ;top:40%;left:-15%"></i>
                </label>
                </a>
                <p style="color: #024ab6;font-size:20px ;position:absolute ;top:55%; width: 100%; text-align: center">
                    사진을
                    선택해주세요.</p>
            </div>
            <div class="mainMenu" id="mainMenu">
                <div class="inputFileBtn">
                    <form action="/storyBoard/saveFile" method="post" id="storyFile" enctype="multipart/form-data">
                        <input type="hidden" id="id" name="id">
                        <input type="hidden" th:name="_csrf" th:value="${_csrf.token}">
                        <input type="hidden" name="memberProfileName" th:value="${memberDTO.memberProfileName}">
                        <input type="file" id="hiddenFile" name="storyImgFile"onsubmit="return false;"  hidden>
<!--                        <input type="file" id="upImgFiles" name="storyFile" onsubmit="return false;" onchange="uploadImgPreview(this);">-->
                        <input type="file" name="storyFile" id="upImgFiles" onsubmit="return false;" onchange="uploadImgPreview(this)"
                               multiple hidden>
                    </form>

                </div>
                <div class="editMenu" id="editMenu">
                    <button class="btn btn-primary" onclick="editFnc1()"><i class="bi bi-type"></i></button>
                    <button class="btn btn-primary" onclick="editFnc2()" id="reverseSlideContentDown"><i class="bi bi-outlet"></i></button>
                    <button class="btn btn-primary" onclick="editFnc3()"><i class="bi bi-sliders"></i></button>
                    <button class="btn btn-primary" onclick="editFnc4()"><i class="bi bi-three-dots"></i></button>
                </div>
                <button type="button" class="saveStory btn-primary" id="saveStory" onclick="saveFnc()"><i class="bi bi-chevron-right"></i></button>
            </div>

            <div class="fontMenu" id="fontMenu">
                <div class="editFont" id="editFont">
                    <button class="btn btn-primary" onclick="editFnc1a()"><i id=icon1 class="bi bi-text-center"></i></button>
                    <button class="btn btn-primary" onclick="editFnc1b()"><i class="bi bi-palette"></i></button>
                    <button class="btn btn-primary" onclick="editFnc1c()"><i class="bi bi-type"></i></button>
                    <button class="btn btn-outline-primary" onclick="editFnc1d()">완료</button>
                </div>
                <div class="editBox" id="editBox">
                    <div class="filters" id="filters">
                        <button onClick="reset()">원본</button>
                        <button onClick="gray()">흑백</button>
                        <button onClick="sepia()">세피아</button>
                        <button onClick="brightness()">밝게</button>
                        <button onClick="contrast()">조도</button>
                        <button onClick="invert()">반전</button>
                    </div>
                </div>
                <div class="rangBar" id="rangeBar">
                    <input class="slider_range" id="slider" type="range" value="0" min="2" max="48">
                    <p style="font-size: 2px; text-align: center" id="slider_value_view">0</p>
                </div>
                <div class="colorCircles" id="colorCircles">
                    <button type="button" class="circles" style="background-color: black" id="bk" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: white" id="wt" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: blue" id="bl" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: skyblue" id="sb" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: deeppink" id="dp" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: hotpink" id="hp" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: red" id="rd" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: green" id="gn" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: saddlebrown" id="br" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: rebeccapurple" id="pu" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: yellow" id="ye" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: gray" id="gr" onclick="colorChange(this.id)"></button>
                    <button type="button" class="circles" style="background-color: darkgrey" id="dg" onclick="colorChange(this.id)"></button>
                </div>
                <div class="fontDiv" id="fontDiv">
                    <button type="button" class="fontKr" style="font-family: 'Dongle', sans-serif; font-size: 25px" id="dongle" onclick="fontChange(this.id)">Aa</button>
                    <button type="button" class="fontKr" style="font-family: 'Hi Melody', cursive; font-size: 25px" id="hiMelody" onclick="fontChange(this.id)">Aa</button>
                    <button type="button" class="fontKr" style="font-family: 'Nanum Pen Script', cursive; font-size: 25px" id="nanumPen" onclick="fontChange(this.id)">Aa</button>
                    <button type="button" class="fontKr" style="font-family: 'Noto Sans KR', sans-serif; padding-top: 2px" id="notoSans" onclick="fontChange(this.id)">Aa</button>
                    <button type="button" class="fontKr" style="font-family: 'Noto Serif KR', serif; padding-top: 2px" id="notoSerif" onclick="fontChange(this.id)">Aa</button>
                    <button type="button" class="fontKr" style="font-family: 'Single Day', cursive; font-size: 25px" id="singleDay" onclick="fontChange(this.id)">Aa</button>
                </div>
            </div>
            <div id="reverse">
                <div class="slide slideUp" id="slideUp">
                    <div class="closeDiv2"><a href="#"><i class="bi bi-x-lg" id="reverseSlideContentUp" style="font-size: 25px; color: white" onclick="downSlide()"></i></a></div>
                    <div class="btnFncDiv">
                        <button type="button" class="btnFnc btn-secondary" style="color: rebeccapurple !important; font-size: 20px" onclick="locationFnc()"><i class="bi bi-geo-alt-fill"></i>위치</button>
                        <button type="button" class="btnFnc btn-secondary" style="color: coral !important; font-size: 20px" onclick="referenceFnc()"><i class="bi bi-at"></i>언급</button>
                        <button type="button" class="btnFnc btn-secondary" style="color: crimson !important; font-size: 14px; padding-top: 5px;" onclick="hashtagFnc()"><i class="bi bi-hash"></i>해시태그</button>
                    </div>
                    <div class="btnFncDiv">
                        <button type="button" class="btnFnc btn-secondary" onclick="questionFnc()">질문</button>
                        <button type="button" class="btnFnc btn-secondary" onclick="surveyFnc()">설문</button>
                        <button type="button" class="btnFnc btn-secondary" onclick="quizFnc()">퀴즈</button>
                    </div>
                    <div class="btnFncDiv">
                        <button type="button" class="btnFnc btn-secondary" onclick="linkTag()">링크</button>
                        <input type="hidden" th:name="_csrf" th:value="${_csrf.token}">
                        <label for="addFile" class="addFileLabel">
                            <img src="https://icon-library.com/images/photo-icon/photo-icon-12.jpg" width="30" style="border-radius: 50%; padding-top: 6px" alt="imgFile"></label>
                        <input type="file" accept="image/*" class="bi bi-images" id="addFile"  name="storyImgFile" onchange="addImgFile(this)" onsubmit="return false" style="display: none">
                        <input type="button" class="btnFnc btn-secondary" id="today">
                    </div>
                </div>
                <div class="linkDiv" id="linkDiv">
                    <button class="returnLeft"><i class="bi bi-arrow-left" onclick="location.href='javascript:history.back()'"></i></button><span style="margin-right: 30%"><b>링크 추가</b></span><button class="btn btn-outline-primary" id="endLink">완료</button>

                    <div style="text-align: left"><label for="siteLink" style="font-size: 12px">URL</label></div>
                    <div style="text-align: left; "><input type="text" id="siteLink" placeholder="http://example.com" autofocus></div>
                    <p>스토리를 보는 사람이 스티커를 눌러 이 링크로 이동할 수 있습니다.</p>
                    <div class="sticker" id="sticker" onclick="stickerFnc()"><i class="bi bi-plus"></i>스티커 텍스트 맞춤 설정</div>
                    <div id="stickerDiv">
                        <label class='stickerLabel' for='stickerInput' style="font-size: 12px">스티커 텍스트</label>
                        <div><input id='stickerInput'></div>
                        <p>이 텍스트는 URL이 아닌 스티커에 표시됩니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript">
    const saveBox = document.getElementById("saveBox");
    const tagGroup = document.getElementById("tagGroup");
    const reverse = document.getElementById("reverse")
    const inputToday = document.getElementById("inputToday");
    const addImgDiv = document.getElementById("addImgDiv");
    const inputLinkDiv = document.getElementById("inputLinkDiv");
    // const questionDiv = document.getElementById("questionDiv");
    const questionBox = document.getElementById("questionBox");
    const surveyGroup = document.getElementById("surveyGroup");
    const quizGroup = document.getElementById("quizGroup");
    const locationGroup = document.getElementById("locationGroup");
    const locationTag = document.getElementById("locationTag");
    const hashtagDiv = document.getElementById("hashtagDiv");
    const referenceDiv = document.getElementById("referenceDiv");
    // const inputTextDiv = document.getElementById("inputTextDiv");
    const mainInputText = document.getElementById("mainInputText");
    const dragToday = document.getElementById("inputToday");
    const mainMenu = document.getElementById("mainMenu");
    const editBox = document.getElementById("editBox");
    const endClose = document.getElementById("endClose");
    const inputLink = document.getElementById("inputLink");
    const question2 = document.getElementById("question2");
    const answer = document.getElementById("answer");
    const question = document.getElementById("question");
    const answer1 = document.getElementById("answer1");
    const answer2 = document.getElementById("answer2");
    const answer3 = document.getElementById("answer3");
    const answer4 = document.getElementById("answer4");
    const quiz = document.getElementById("quiz");
    const option1 = document.getElementById("option1");
    const option2 = document.getElementById("option2");
    const option3 = document.getElementById("option3");
    const option4 = document.getElementById("option4");
    const inputHashTag = document.getElementById("inputHashTag");
    const inputReference = document.getElementById("inputReference");

// 드래그 앤 드롭 기능
    window.addEventListener("load", function (){
        console.log("드래그 정의");
        let dragging = false;
        let offset = {x:0, y:0};
        let current = null;
        let left = saveBox.offsetLeft;
        let top = saveBox.offsetTop;

        window.onresize = function(){
            console.log("드래그 창변환");
            left = saveBox.offsetLeft;
            top = saveBox.offsetTop;
        }

        $('.draggable').mouseover(function(){
            let clickId = $(this).attr("id");
            console.log(clickId);
            document.getElementById(clickId).style.cursor="move";

            const clickThis = $(this).closest(".draggable").attr("class");
            console.log(clickThis);
            document.onmousedown = function (e) {
            console.log("마우스 다운");
            console.log(document.getElementById(clickId).className);
            if(e.target.classList.contains("draggable")){
                console.log("드래그 객체 지정");
                dragging = true;
                current = e.target;
                offset.x = e.offsetX;
                offset.y = e.offsetY;
            }
        };
        });
        document.onmousemove = function (e) {
            if(dragging){
                console.log("마우스 드래그시");
                let x = e.pageX - offset.x - left;
                let y = e.pageY - offset.y - top;
                current.style.left = x + "px";
                current.style.top = y + "px";
                console.log("left: "+x+"/top: "+y)
            }
        };
        document.onmouseup = function () {
            console.log("마우스 업");
            dragging = false;
        };
    });
    const saveFnc = () => {
        let header=$("meta[name='_csrf_header']").attr('content');
        let token =$("meta[name='_csrf']").attr('content');

        let storyImgTag="";
        let addImg = document.getElementById("addImg");
        if(addImg.src.length>0){
            addImg.src="";
            storyImgTag = document.getElementById("imgDrag").outerHTML;
        }

        let storyTextTag="";
        if(mainInputText.value.length>0){
        mainInputText.setAttribute("value", mainInputText.value);
        // inputTextDiv.setAttribute("style", "position: fixed");
        storyTextTag= mainInputText.outerHTML;
        }

        let storyTodayTag="";
        if(inputToday.value.length>0){
            // inputToday.setAttribute("style", "position: fixed");
            storyTodayTag= inputToday.outerHTML;
        }

        let storyLinkTag ="";
        if(inputLinkDiv.style.display=="block"){
            // inputLinkDiv.setAttribute("style", "position: fixed");
            storyLinkTag= document.getElementById("inputLinkDiv").outerHTML;
        }
        $('#inputLinkDiv').on('click', function (){
            const siteLink = document.getElementById("siteLink");
            location.href=siteLink.value;
        });

        let storyQuestionTag="";
        if(question2.value.length>0){
            question2.setAttribute("value", question2.value);
            answer.setAttribute("value", answer.value);
            $(answer).attr("readonly", false);
            // questionDiv.setAttribute("style", "position: fixed");
            storyQuestionTag= questionBox.outerHTML;
        }

        let storySurveyTag="";
        if(question.value.length>0){
            question.setAttribute("value", question.value);
            answer1.setAttribute("value", answer1.value);
            answer2.setAttribute("value", answer2.value);
            answer3.setAttribute("value", answer3.value);
            answer4.setAttribute("value", answer4.value);
            // surveyGroup.setAttribute("style", "position: fixed");
            storySurveyTag= surveyGroup.outerHTML;
        }

        let storyQuizTag="";
        if(quiz.value.length>0){
            quiz.setAttribute("value", quiz.value);
            option1.setAttribute("value", option1.value);
            option2.setAttribute("value", option2.value);
            option3.setAttribute("value", option3.value);
            option4.setAttribute("value", option4.value);
            // quizGroup.setAttribute("style", "position: fixed");
            storyQuizTag= quizGroup.outerHTML;
        }

        let storyHashTag="";
        if(inputHashTag.value.length>0){
            inputHashTag.setAttribute("value", inputHashTag.value);
            // hashtagDiv.setAttribute("style", "position: fixed");
            storyHashTag= hashtagDiv.outerHTML;
        }

        let storyReferenceTag ="";
        if(inputReference.value.length>0){
            inputReference.setAttribute("value", inputReference.value);
            // reference.setAttribute("style", "position: fixed");
            storyReferenceTag = referenceDiv.outerHTML;
        }

        let storyLocationTag="";
        let inputLocation = document.getElementById("inputLocation");
        if(inputLocation.value.length>0){
            // locationTag.setAttribute("style", "position: fixed");
            storyLocationTag= locationTag.outerHTML;
        }


        $.ajax({
            type: "post",
            url: "/storyBoard/save",
            beforeSend:function (result){
                result.setRequestHeader(header,token);
            },
            data: {
                "storyImgTag": storyImgTag,
                "storyTextTag": storyTextTag,
                "storyTodayTag": storyTodayTag,
                "storyLinkTag": storyLinkTag,
                "storyQuestionTag": storyQuestionTag,
                "storySurveyTag": storySurveyTag,
                "storyQuizTag": storyQuizTag,
                "storyHashTag": storyHashTag,
                "storyReferenceTag": storyReferenceTag,
                "storyLocationTag": storyLocationTag
            },
            dataType:"text",
            success: function (data) {
                const imgFile = document.getElementById("addFile").files;
                const dataTranster = new DataTransfer();
                Array.from(imgFile)
                    .forEach(file => {
                    dataTranster.items.add(file);
                });
                document.querySelector('#hiddenFile').files = dataTranster.files;
                document.getElementById("hiddenFile").files=imgFile;
                document.getElementById("id").value=data;
                document.getElementById("storyFile").submit();
                console.log("저장성공");
            },
            error: function () {
                console.log("저장실패");
            }
        });
    }
    // 메인 업로드 이미지 보여주기 기능

    function uploadImgPreview(obj) {
        document.getElementById("filePreview").innerHTML="";
        document.getElementById("filePreview").style.backgroundImage="";
        const editMenu = document.getElementById("editMenu");
        const saveStory = document.getElementById("saveStory");
        editMenu.style.display="block";
        saveStory.style.display="block";

        const file = document.getElementById("upImgFiles");
            if (file.files[0] == null){
                alert("파일이 없습니다.");
            } else {
                for (const f of obj.files){
                    validation(f)
                }
            }

        function validation(obj){
            const fileTypes = ['application/pdf', 'image/gif', 'image/jpeg', 'image/png', 'image/bmp', 'image/tif', 'video/mp4' ,'application/haansofthwp', 'application/x-hwp'];
            const fileTypes2 = ['image/gif', 'image/jpeg', 'image/png'];
            const fileTypes3 = ['video/mp4'];
            const fileTypes4 = ['image/gif', 'image/jpeg', 'image/png', 'video/mp4'];
            if (obj.name.length > 100) {
                document.querySelector("input[type=file]").value = "";
                alert("파일명이 100자 이상인 파일은 제외되었습니다.");
                return false;
            }
            else if (obj.size > (100 * 1024 * 1024)) {
                document.querySelector("[type=file]").value = "";
                alert("최대 파일 용량인 100MB를 초과한 파일은 제외되었습니다.");
                return false;
            }
            else if (obj.name.lastIndexOf('.') == -1) {
                document.querySelector("input[type=file]").value = "";
                alert("확장자가 없는 파일은 제외되었습니다.");
                return false;
            }
            else if (!fileTypes.includes(obj.type)) {
                document.querySelector("input[type=file]").value = "";
                alert("첨부가 불가능한 파일은 제외되었습니다.");
                return false;
            }else if (fileTypes4.includes(obj.type)) {
                let reader = new FileReader();
                reader.addEventListener("load", function () {
                    if (fileTypes2.includes(obj.type)) {
                        document.getElementById("imgBtnZone").style.display="none";
                        document.getElementById("filePreview").style.backgroundImage="url('"+this.result+"')";

                    } else if (fileTypes3.includes(obj.type)) {
                        let video = document.createElement("video");

                        video.setAttribute("src", this.result);
                        video.setAttribute("width", "100%");
                        video.setAttribute("autoplay", "autoplay");
                        video.setAttribute("id", "aaa");
                        video.setAttribute("loop", "loop");
                        video.setAttribute("class", "aaa");
                        document.getElementById("imgBtnZone").style.display="none";
                        document.getElementById("filePreview").appendChild(video);
                    }
                });
                if (obj) {
                    reader.readAsDataURL(obj);
                }
            }
            return true;
        }
    }
    // 화면편집 기능
    function reset(){
        saveBox.style.filter=''
    }
    function gray(){
        saveBox.style.filter='grayscale(100)'
    }
    function sepia(){
        saveBox.style.filter='sepia(1)'
    }
    function brightness(){
        saveBox.style.filter='brightness(1.3)'
    }

    function contrast(){
        saveBox.style.filter='contrast(1.3)'
    }
    function invert(){
        saveBox.style.filter='invert(1)'
    }
// 글자 크기 슬라이더 기능
    const slider = document.getElementById('slider');

    slider.addEventListener('input', function() {
        let size = slider.value;
        mainInputText.style.fontSize = size + "px";
    });
    function ShowSliderValue(sVal){
        let obValueView = document.getElementById("slider_value_view");
        obValueView.innerHTML = sVal
    }
    const RangeSlider = function(){
        let range = $('.slider_range');
        range.on('input', function(){
            ShowSliderValue(this.value);
        });
    };
    RangeSlider();

// 인풋 글자편집 기능
    const editFnc1 = () => {
        editBox.style.display="none";
        mainMenu.style.display="none";
        document.getElementById("fontMenu").style.display="block";
        document.getElementById("fontMenu").style.zIndex="7100";
        mainInputText.style.display="block";
        mainInputText.style.zIndex="6500";
        // inputTextDiv.style.display="block";
        // inputTextDiv.style.zIndex="6500";
        mainInputText.focus();
    }
    const editFnc2 = () => {

    }
    const editFnc3 = () => {
        editBox.style.display="block";
    }
    const editFnc4 = () => {

    }

// 인풋 글자정렬 기능
    const editFnc1a = () => {
            if($('#icon1').hasClass("bi-text-center")) {
                $('#icon1').removeClass('bi-text-center');
                $('#icon1').addClass('bi-text-left');
                mainInputText.style.textAlign="left";
            } else if($('#icon1').hasClass("bi-text-left")) {
                $('#icon1').removeClass('bi-text-left');
                $('#icon1').addClass('bi-text-right');
                mainInputText.style.textAlign="right";
            } else if($('#icon1').hasClass("bi-text-right")) {
                $('#icon1').removeClass('bi-text-right');
                $('#icon1').addClass('bi-text-center');
                mainInputText.style.textAlign="center";
            }
    }
// 글자 색상변경 기능
    const editFnc1b = () => {
        document.getElementById("fontDiv").style.display="none";
        document.getElementById("colorCircles").style.display="block";
    }
    const colorChange = (clickId) => {
        mainInputText.style.color = document.getElementById(clickId).style.backgroundColor;
    }
// 글자 폰트변경 기능
    const editFnc1c = () => {
        document.getElementById("colorCircles").style.display="none";
        document.getElementById("fontDiv").style.display="block";
    }
    const fontChange = (clickId) => {
        mainInputText.style.fontFamily=document.getElementById(clickId).style.fontFamily;
    }
// 글자편집 완료 버튼 기능
    const editFnc1d = () => {
        document.getElementById("fontMenu").style.zIndex="31";
        // inputTextDiv.style.display="block";
        mainInputText.style.display="block";
        document.getElementById("fontMenu").style.display = "none";
        mainMenu.style.display = "block";
        $("#mainInputText").attr("readonly", true);

    }

// 업슬라이드창 기능
    $('#slideContentDown').on('click', function()
    {
        $('.slideDown').slideDown();
    });

    $('#slideContentUp').on('click', function()
    {
        $('.slideDown').slideUp();
    });
// 이모지아이콘 클릭시 업슬라이드창 띄우기 (오늘날짜 버튼에 날짜넣기)
    $('#reverseSlideContentDown').on('click', function() {
            tagGroup.style.zIndex="3000";
            tagGroup.style.display="block";
            editBox.style.display="none";
            reverse.style.display="block";
            reverse.style.zIndex="7100";
            let today = new Date();
            let year = today.getFullYear(); // 년도
            let month = today.getMonth() + 1;  // 월
            let date = today.getDate();  // 날짜
            document.getElementById("today").value=year + '.' + month + '.' + date + '.';
                $('.slideUp').slideDown();
    });
// 다운슬라이드창 기능
    $('#reverseSlideContentUp').on('click', function() {
        downSlide();
    });
const downSlide = () => {
    $('.slideUp').slideUp();
    reverse.style.zIndex="20";
}
// 메인 이미지 위에 추가이미지 넣기
    const addImgFile = (input) => {
        downSlide();
        reverse.style.zIndex="20";
        if(input.files && input.files[0]) {
            // 이미지 파일인지 검사 (생략)
            // FileReader 인스턴스 생성
            const reader = new FileReader()
            // 이미지가 로드가 된 경우
            reader.onload = e => {
                const previewImage = document.getElementById("addImg");
                previewImage.src = e.target.result;
            }
            // reader가 이미지 읽도록 하기
            reader.readAsDataURL(input.files[0]);
        }
        addImgDiv.style.display="block";
        tagGroup.style.display="none";



    }
    // input file에 change 이벤트 부여
    const inputImage = document.getElementById("addFile");
    inputImage.addEventListener("change", e => {
        addImgFile(e.target)
    });
// 추가이미지 드래그 앤 드롭 기능
    let addImg = document.querySelector("#addImg");
    let imgDrag = document.getElementById("imgDrag");

    let active = false;
    let currentX;
    let currentY;
    let initialX;
    let initialY;
    let xOffset = 0;
    let yOffset = 0;

    imgDrag.addEventListener("touchstart", dragStart2, false);
    imgDrag.addEventListener("touchend", dragEnd2, false);
    imgDrag.addEventListener("touchmove", drag2, false);

    imgDrag.addEventListener("mousedown", dragStart2, false);
    imgDrag.addEventListener("mouseup", dragEnd2, false);
    imgDrag.addEventListener("mousemove", drag2, false);

    function dragStart2(e) {
        imgDrag.style.zIndex="9000";
        if (e.type === "touchstart") {
            initialX = e.touches[0].clientX - xOffset;
            initialY = e.touches[0].clientY - yOffset;
        } else {
            initialX = e.clientX - xOffset;
            initialY = e.clientY - yOffset;
        }

        if (e.target === addImg) {
            active = true;
        }
    }

    function dragEnd2(e) {
        initialX = currentX;
        initialY = currentY;
        active = false;
        imgDrag.style.zIndex="3000";

    }

    function drag2(e) {
        if (active) {

            e.preventDefault();

            if (e.type === "touchmove") {
                currentX = e.touches[0].clientX - initialX;
                currentY = e.touches[0].clientY - initialY;
            } else {
                currentX = e.clientX - initialX;
                currentY = e.clientY - initialY;
            }

            xOffset = currentX;
            yOffset = currentY;

            setTranslate(currentX, currentY, imgDrag);
        }
    }
    function setTranslate(xPos, yPos, el) {
        el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
    }

// 이미지 리사이징 기능
    $(function (){
        $('.addImg').resizable({
            minHeight :50,
            minWidth: 70,
            autohide: false,
            ghost: true
        });
    });
// 링크 요청화면 기능
    const linkTag = () => {
      reverse.style.backgroundColor="rgba(100,100,100,0.9)";
      document.getElementById("slideUp").style.display="none";
      document.getElementById("linkDiv").style.display="block";
      document.getElementById("siteLink").focus();
    }
    $('#endLink').on('click', function (){
        document.getElementById("linkDiv").style.display="none";
        downSlide();
        reverse.style.display="none";
        inputLinkDiv.style.display="block";
        inputLinkDiv.style.zIndex="6500";
        let stickerValue = document.getElementById("stickerInput").value;
        if(stickerValue) {
            inputLinkDiv.innerHTML+=stickerValue;
        } else {
            const siteLink = document.getElementById("siteLink").value;
            inputLinkDiv.innerHTML+=siteLink;
        }
        reverse.style.backgroundColor="transparent";
    });

// 링크태그 기능
    const stickerFnc = () => {
        document.getElementById("sticker").style.display="none";
        document.getElementById("stickerDiv").style.display="block";
        document.getElementById("stickerInput").focus();
        return false;
    }

// 링크태그 드래그 기능
//     inputLinkDiv.onmousedown = function(event) {
//         inputLinkDiv.style.zIndex="9000";
//         let shiftX = event.clientX - inputLinkDiv.getBoundingClientRect().left;
//         let shiftY = event.clientY - inputLinkDiv.getBoundingClientRect().top;
//
//         document.body.append(inputLinkDiv);
//         moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             inputLinkDiv.style.left = pageX - shiftX + 'px';
//             inputLinkDiv.style.top = pageY - shiftY + 'px';
//         }
//         document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         inputLinkDiv.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             inputLinkDiv.onmouseup = null;
//             inputLinkDiv.style.zIndex="6500";
//         };
//     };
//     inputLinkDiv.ondragstart = function() {
//         return false;
//     };
// 날짜태그 기능

    $('#today').on('click', function (){
        // const todayDiv = document.getElementById("todayDiv");
        inputToday.value=document.getElementById("today").value;
        downSlide();
        // todayDiv.style.display="block";
        inputToday.style.display="block";
        inputToday.style.zIndex="6500";
    })
// 날짜태그 드래그 기능
//     dragToday.onmousedown = function(event) {
//         dragToday.style.zIndex="9000";
//         let shiftX = event.clientX - dragToday.getBoundingClientRect().left;
//         let shiftY = event.clientY - dragToday.getBoundingClientRect().top;
//
//             document.body.append(dragToday);
//             moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             dragToday.style.left = pageX - shiftX + 'px';
//             dragToday.style.top = pageY - shiftY + 'px';
//         }
//             document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         dragToday.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             dragToday.onmouseup = null;
//             dragToday.style.zIndex="6500";
//         };
//     };
//     dragToday.ondragstart = function() {
//         return false;
//     };
    // 질문태그 기능
    const questionFnc = () => {
        $('#question2').attr('readonly', false);
        $('#answer').attr('readonly', true);
        mainMenu.style.display="none";
        tagGroup.style.backgroundColor="rgba(100,100,100,0.9)";
        tagGroup.style.display="block";
        tagGroup.style.zIndex="6500";

        addImgDiv.style.zIndex="3000";
        // inputTextDiv.style.zIndex="6400";
        mainInputText.style.zIndex="6400";
        inputToday.style.zIndex="6400";
        inputLinkDiv.style.zIndex="6400";
        surveyGroup.style.zIndex="6400";
        quizGroup.style.zIndex="6400";
        hashtagDiv.style.zIndex="6400";
        // reference.style.zIndex="6400";
        referenceDiv.style.zIndex="6400";
        locationTag.style.zIndex="6400";
        // questionDiv.style.zIndex="9000";
        questionBox.style.zIndex="9000";

        // questionDiv.style.display="block";
        questionBox.style.display="block";
        endClose.style.display="block";
        downSlide();
        reverse.style.display="none";
    }
// 태그완료 기능
    const endQuestion = () => {
        let answer3 = document.getElementById("answer3");
        if(answer3.value==""){
            answer3.style.display="none";
            surveyGroup.style.height="140px";
        }
        tagGroup.style.backgroundColor="transparent";
        tagGroup.style.zIndex="3000";
        mainMenu.style.display="block";
        // questionDiv.style.zIndex="6500";
        questionBox.style.zIndex="6500";
        surveyGroup.style.zIndex="6500";
        // reference.style.zIndex="6500";
        referenceDiv.style.zIndex="6500";
        hashtagDiv.style.zIndex="6500";
        quizGroup.style.zIndex="6500";
        addImgDiv.style.zIndex="3000";
        $('#question2').attr('readonly', true);
        $('#question').attr('readonly', true);
        $('#answer1').attr('readonly', true);
        $('#answer2').attr('readonly', true);
        $('#answer3').attr('readonly', true);
        $('#answer4').attr('readonly', true);
        $('#quiz').attr('readonly', true);
        $('#option1').attr('readonly', true);
        $('#option2').attr('readonly', true);
        $('#option3').attr('readonly', true);
        $('#option4').attr('readonly', true);
        $('#inputHashTag').attr('readonly', true);
        $('#inputReference').attr('readonly', true);

        endClose.style.display="none";

    }
// 질문태그 드래그 기능
//     questionDiv.onmousedown = function(event) {
//         questionDiv.style.zIndex="9000";
//         let shiftX = event.clientX - questionDiv.getBoundingClientRect().left;
//         let shiftY = event.clientY - questionDiv.getBoundingClientRect().top;
//
//         document.body.append(questionDiv);
//
//         moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             questionDiv.style.left = pageX - shiftX + 'px';
//             questionDiv.style.top = pageY - shiftY + 'px';
//         }
//         document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         questionDiv.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             questionDiv.onmouseup = null;
//             questionDiv.style.zIndex="6500";
//         };
//     };
//     questionDiv.ondragstart = function() {
//         return false;
//     };
// 설문태그 기능
    const surveyFnc = () => {
        $('#question').attr('readonly', false);
        $('#answer1').attr('readonly', false);
        $('#answer2').attr('readonly', false);
        $('#answer3').attr('readonly', false);
        $('#answer4').attr('readonly', false);
        tagGroup.style.backgroundColor="rgba(100,100,100,0.9)";
        tagGroup.style.display="block";
        tagGroup.style.zIndex="6500";
        mainMenu.style.display="none";
        questionBox.style.zIndex="31";

        addImgDiv.style.zIndex="3000";
        // inputTextDiv.style.zIndex="6400";
        mainInputText.style.zIndex="6400";
        inputToday.style.zIndex="6400";
        inputLinkDiv.style.zIndex="6400";
        quizGroup.style.zIndex="6400";
        hashtagDiv.style.zIndex="6400";
        // reference.style.zIndex="6400";
        referenceDiv.style.zIndex="6400";
        locationTag.style.zIndex="6400";
        questionBox.style.zIndex="6400";
        surveyGroup.style.zIndex="9000";

        surveyGroup.style.display="block";
        downSlide();
        reverse.style.display="none";
        endClose.style.display="block";
    }
    let newInputStatus = true;
    // 설문답 추가기능
    const newInput = () => {
        const answer3 = document.getElementById("answer3");
        if(newInputStatus && answer3.value){
            document.getElementById("surveyDiv").style.height="230px";
            document.getElementById("answer4").style.display="block";
            newInputStatus = false;
        }
    }
    const answer4Fnc = () => {
        const answer4 = document.querySelector("#answer4");
        if (answer4.value=="") {
            answer4.style.display = "none";
            document.getElementById("surveyDiv").style.height="180px";
            newInputStatus = true;
        }
    }
// 설문태그 드래그 기능
//     surveyGroup.onmousedown = function(event) {
//         surveyGroup.style.zIndex="9000";
//         let shiftX = event.clientX - surveyGroup.getBoundingClientRect().left;
//         let shiftY = event.clientY - surveyGroup.getBoundingClientRect().top;
//
//         document.body.append(surveyGroup);
//
//         moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             surveyGroup.style.left = pageX - shiftX + 'px';
//             surveyGroup.style.top = pageY - shiftY + 'px';
//         }
//         document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         surveyGroup.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             surveyGroup.onmouseup = null;
//             surveyGroup.style.zIndex="6500";
//         };
//     };
//     surveyGroup.ondragstart = function() {
//         return false;
//     };
// 퀴즈태그 기능
    const quizFnc = () => {
        $('#quiz').attr('readonly', false);
        $('#option1').attr('readonly', false);
        $('#option2').attr('readonly', false);
        $('#option3').attr('readonly', false);
        $('#option4').attr('readonly', false);
        quizGroup.style.display="block";
        tagGroup.style.backgroundColor="rgba(100,100,100,0.9)";
        tagGroup.style.display="block";
        tagGroup.style.zIndex="6500";
        mainMenu.style.display="none";
        questionBox.style.zIndex="31";
        surveyGroup.style.zIndex="31";

        addImgDiv.style.zIndex="3000";
        // inputTextDiv.style.zIndex="6400";
        mainInputText.style.zIndex="6400";
        inputToday.style.zIndex="6400";
        inputLinkDiv.style.zIndex="6400";
        surveyGroup.style.zIndex="6400";
        hashtagDiv.style.zIndex="6400";
        // reference.style.zIndex="6400";
        referenceDiv.style.zIndex="6400";
        locationTag.style.zIndex="6400";
        questionBox.style.zIndex="6400";
        quizGroup.style.zIndex="9000";
        downSlide();
        reverse.style.display="none";
        endClose.style.display="block";
    }
    const shapeBtn1 = document.getElementById("shapeBtn1");
    const shapeBtn2 = document.getElementById("shapeBtn2");
    const shapeBtn3 = document.getElementById("shapeBtn3");
    const shapeBtn4 = document.getElementById("shapeBtn4");
    const A = document.getElementById("quizIcoA");
    const B = document.getElementById("quizIcoB");
    const C = document.getElementById("quizIcoC");
    const D = document.getElementById("quizIcoD");

    const clickQuizIcoA = () => {
        A.innerHTML= "<i class='bi bi-check2'></i>";
        shapeBtn1.style.backgroundColor="skyblue";
        B.innerHTML= "B";
        shapeBtn2.style.backgroundColor="transparent";
        C.innerHTML= "C";
        shapeBtn3.style.backgroundColor="transparent";
        D.innerHTML= "D";
        shapeBtn4.style.backgroundColor="transparent";
    }
    const clickQuizIcoB = () => {
        A.innerHTML= "A";
        shapeBtn1.style.backgroundColor="transparent";
        B.innerHTML= "<i class='bi bi-check2'></i>";
        shapeBtn2.style.backgroundColor="skyblue";
        C.innerHTML= "C";
        shapeBtn3.style.backgroundColor="transparent";
        D.innerHTML= "D";
        shapeBtn4.style.backgroundColor="transparent";
    }
    const clickQuizIcoC = () => {
       A.innerHTML= "A";
       shapeBtn1.style.backgroundColor="transparent";
       B.innerHTML= "B";
       shapeBtn2.style.backgroundColor="transparent";
       C.innerHTML= "<i class='bi bi-check2'></i>";
       shapeBtn3.style.backgroundColor="skyblue";
       D.innerHTML= "D";
       shapeBtn4.style.backgroundColor="transparent";
    };
    const clickQuizIcoD = () => {
        A.innerHTML= "A";
        shapeBtn1.style.backgroundColor="transparent";
        B.innerHTML= "B";
        shapeBtn2.style.backgroundColor="transparent";
        C.innerHTML= "C";
        shapeBtn3.style.backgroundColor="transparent";
        D.innerHTML= "<i class='bi bi-check2'></i>";
        shapeBtn4.style.backgroundColor="skyblue";
    }
    const addCheck = () => {
        if(option1.value && option2.value) {
            if(option3.value==""){
                quizGroup.style.height="200px";
                shapeBtn3.style.display="block";
                shapeBtn3.style.border="1px dashed darkgrey";
                shapeBtn4.style.display="none";
            }
        }

    }
    const addCheck2 = () => {

        if(option1.value && option2.value && option3.value) {
            shapeBtn3.style.border="1px solid darkgrey";
            quizGroup.style.height="250px";
            shapeBtn4.style.border="1px dashed darkgrey";
            shapeBtn4.style.display="block";
        } else {
            shapeBtn3.style.border="1px dashed darkgrey";

        }
    }
    const addCheck3 = () => {
        if(option4.value) {
            shapeBtn4.style.border="1px solid darkgrey";
        } else {
            shapeBtn4.style.border="1px dashed darkgrey";
            $('#option4').on('blur', function (){
                if(option4.value==""){
                    shapeBtn4.removeAttribute('style');
                    shapeBtn4.style.display="none";
                    quizGroup.style.height="200px";
                }
            })
        }
    }

    const delCheck = () => {
        if(!option4.value && !option3.value) {
            shapeBtn3.removeAttribute('style');
            shapeBtn3.style.display="none";
            quizGroup.style.height="150px";
        }

    }
// 퀴즈태그 드래그 기능
//     quizGroup.onmousedown = function(event) {
//         quizGroup.style.zIndex="9000";
//         let shiftX = event.clientX - quizGroup.getBoundingClientRect().left;
//         let shiftY = event.clientY - quizGroup.getBoundingClientRect().top;
//
//         document.body.append(quizGroup);
//
//         moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             quizGroup.style.left = pageX - shiftX + 'px';
//             quizGroup.style.top = pageY - shiftY + 'px';
//         }
//         document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         quizGroup.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             quizGroup.onmouseup = null;
//             quizGroup.style.zIndex="6500";
//         };
//     };
//     quizGroup.ondragstart = function() {
//         return false;
//     };
// 해시태그 기능
    const hashtagFnc = (event) => {
        $('#inputHashTag').attr('readonly', false);
        tagGroup.style.backgroundColor="rgba(100,100,100,0.9)";
        tagGroup.style.display="block";
        tagGroup.style.zIndex="6500";
        mainMenu.style.display="none";
        questionBox.style.zIndex="31";
        surveyGroup.style.zIndex="31";
        quizGroup.style.zIndex="31";
        hashtagDiv.style.display="block";
        hashtagDiv.focus();

        addImgDiv.style.zIndex="3000";
        // inputTextDiv.style.zIndex="6400";
        mainInputText.style.zIndex="6400";
        inputToday.style.zIndex="6400";
        inputLinkDiv.style.zIndex="6400";
        surveyGroup.style.zIndex="6400";
        quizGroup.style.zIndex="6400";
        referenceDiv.style.zIndex="6400";
        // reference.style.zIndex="6400";
        locationTag.style.zIndex="6400";
        questionBox.style.zIndex="6400";
        hashtagDiv.style.zIndex="9000";
        downSlide();
        reverse.style.display="none";
        endClose.style.display="block";

    }
// 해시태그 드래그 기능
//     hashtagDiv.onmousedown = function(event) {
//         hashtagDiv.style.zIndex="9000";
//         let shiftX = event.clientX - hashtagDiv.getBoundingClientRect().left;
//         let shiftY = event.clientY - hashtagDiv.getBoundingClientRect().top;
//
//         document.body.append(hashtagDiv);
//
//         moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             hashtagDiv.style.left = pageX - shiftX + 'px';
//             hashtagDiv.style.top = pageY - shiftY + 'px';
//         }
//         document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         hashtagDiv.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             hashtagDiv.onmouseup = null;
//             hashtagDiv.style.zIndex="6500";
//         };
//     };
//     hashtagDiv.ondragstart = function() {
//         return false;
//     };
// 언급태그 기능
    const referenceFnc = () => {
        $('#inputReference').attr('readonly', false);
        tagGroup.style.backgroundColor="rgba(100,100,100,0.9)";
        tagGroup.style.zIndex="6500";
        mainMenu.style.display="none";
        reverse.style.display="none";

        addImgDiv.style.zIndex="3000";
        // inputTextDiv.style.zIndex="6400";
        mainInputText.style.zIndex="6400";
        inputToday.style.zIndex="6400";
        inputLinkDiv.style.zIndex="6400";
        surveyGroup.style.zIndex="6400";
        quizGroup.style.zIndex="6400";
        hashtagDiv.style.zIndex="6400";
        locationTag.style.zIndex="6400";
        questionBox.style.zIndex="6400";
        referenceDiv.style.zIndex="9000";
        referenceDiv.style.display="block";
        document.getElementById("inputReference").focus();
        downSlide();
        reverse.style.display="none";
        endClose.style.display="block";
    }
// 언급태그 드래그기능
//     const reference = document.getElementById("reference");
//     reference.onmousedown = function(event) {
//         reference.style.zIndex="9000";
//         let shiftX = event.clientX - reference.getBoundingClientRect().left;
//         let shiftY = event.clientY - reference.getBoundingClientRect().top;
//
//         document.body.append(reference);
//
//         moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             reference.style.left = pageX - shiftX + 'px';
//             reference.style.top = pageY - shiftY + 'px';
//         }
//         document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         reference.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             reference.onmouseup = null;
//             reference.style.zIndex="6500";
//         };
//     };
//     reference.ondragstart = function() {
//         return false;
//     };
// 위치태그 기능
    const locationFnc = () => {
        tagGroup.style.zIndex="6500";
        mainMenu.style.display="none";
        reverse.style.display="none";

        addImgDiv.style.zIndex="3000";
        // inputTextDiv.style.zIndex="6400";
        mainInputText.style.zIndex="6400";
        inputToday.style.zIndex="6400";
        inputLinkDiv.style.zIndex="6400";
        surveyGroup.style.zIndex="6400";
        quizGroup.style.zIndex="6400";
        hashtagDiv.style.zIndex="6400";
        // reference.style.zIndex="6400";
        referenceDiv.style.zIndex="6400";
        questionBox.style.zIndex="6400";
        locationGroup.style.zIndex="9000";
        locationGroup.style.display="block";
        document.getElementById("inputLocation").focus();
    }
    const searchLocation = () => {
        let header=$("meta[name='_csrf_header']").attr('content');
        let token=$("meta[name='_csrf']").attr('content');
        const searchLocation = document.getElementById("inputLocation").value;
        // $.ajax({
        //     type:"get",
        //     url:"/storyBoard/findByLocation",
        //     data:{"storyLocation": searchLocation},
        //     dataType:"json",
        //     beforeSend:function (result){
        //         result.setRequestHeader(header,token);
        //     },
        //
        //     success: function (locationList){
        //         for(let location of locationList) {
        //             document.getElementById("locationList").innerHTML+=locationList[i];
        //         }
        //     }
        // })
    }
    const endLocation = () => {
        tagGroup.style.zIndex="3000";
        locationGroup.style.display="none";
        mainMenu.style.display="block";
        const findLocation = document.getElementById("inputLocation").value;
        const iconTag = '<i class="bi bi-geo-alt-fill">'+'</i>';
        document.getElementById("locationTag").style.display="block";
        document.getElementById("locationTag").style.zIndex="6500";
        addImgDiv.style.zIndex="3000";
        // inputTextDiv.style.zIndex="6500";
        mainInputText.style.zIndex="6500";
        inputToday.style.zIndex="6500";
        inputLinkDiv.style.zIndex="6500";
        surveyGroup.style.zIndex="6500";
        quizGroup.style.zIndex="6500";
        hashtagDiv.style.zIndex="6500";
        // reference.style.zIndex="6500";
        referenceDiv.style.zIndex="6500";
        locationGroup.style.zIndex="6500";
        questionBox.style.zIndex="6500";
        document.getElementById("locationTag").innerHTML=iconTag+findLocation;

    }
// 위치태그 드래그 기능
//     locationTag.onmousedown = function(event) {
//         locationTag.style.zIndex="9000";
//         let shiftX = event.clientX - locationTag.getBoundingClientRect().left;
//         let shiftY = event.clientY - locationTag.getBoundingClientRect().top;
//
//         document.body.append(locationTag);
//
//         moveAt(event.pageX, event.pageY);
//
//         function moveAt(pageX, pageY) {
//             locationTag.style.left = pageX - shiftX + 'px';
//             locationTag.style.top = pageY - shiftY + 'px';
//         }
//         document.addEventListener('mousemove', onMouseMove);
//
//         function onMouseMove(event) {
//             moveAt(event.pageX, event.pageY);
//         }
//         locationTag.onmouseup = function() {
//             document.removeEventListener('mousemove', onMouseMove);
//             locationTag.onmouseup = null;
//             locationTag.style.zIndex="6500";
//         };
//     };
//     locationTag.ondragstart = function() {
//         return false;
//     };

</script>
</html>